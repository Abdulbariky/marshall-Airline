<!-- Quick Booking Widget - Can be embedded on any page -->
<div class="quick-booking-widget" id="quick-booking-widget">
    <div class="widget-header">
        <h3>Quick Book Your Flight</h3>
        <p>Fast and easy flight booking in just a few clicks</p>
    </div>
    
    <form class="quick-booking-form" id="quick-booking-form">
        <div class="form-row">
            <div class="form-group">
                <label for="quick-service">Service</label>
                <select id="quick-service" name="service" required>
                    <option value="">Select Service</option>
                    <option value="helicopter">Helicopter Charter</option>
                    <option value="private-jet">Private Jet</option>
                    <option value="scenic">Scenic Flight</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="quick-passengers">Passengers</label>
                <select id="quick-passengers" name="passengers" required>
                    <option value="">Pax</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6+</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="quick-from">From</label>
                <select id="quick-from" name="from" required>
                    <option value="">Departure</option>
                    <option value="nairobi-wilson">Nairobi (Wilson)</option>
                    <option value="nairobi-jkia">Nairobi (JKIA)</option>
                    <option value="mombasa">Mombasa</option>
                    <option value="kisumu">Kisumu</option>
                    <option value="malindi">Malindi</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="quick-to">To</label>
                <select id="quick-to" name="to" required>
                    <option value="">Destination</option>
                    <option value="masai-mara">Masai Mara</option>
                    <option value="samburu">Samburu</option>
                    <option value="lamu">Lamu</option>
                    <option value="zanzibar">Zanzibar</option>
                    <option value="serengeti">Serengeti</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="quick-date">Departure Date</label>
                <input type="date" id="quick-date" name="date" required>
            </div>
            
            <div class="form-group">
                <label for="quick-time">Time</label>
                <select id="quick-time" name="time" required>
                    <option value="">Time</option>
                    <option value="08:00">08:00 AM</option>
                    <option value="10:00">10:00 AM</option>
                    <option value="12:00">12:00 PM</option>
                    <option value="14:00">02:00 PM</option>
                    <option value="16:00">04:00 PM</option>
                </select>
            </div>
        </div>
        
        <div class="widget-actions">
            <button type="submit" class="btn btn-primary btn-large">
                <i class="fas fa-search"></i>
                Check Availability
            </button>
            <a href="pages/booking.html" class="btn btn-outline">
                <i class="fas fa-cog"></i>
                Advanced Booking
            </a>
        </div>
    </form>
    
    <div class="widget-features">
        <div class="feature-item">
            <i class="fas fa-shield-alt"></i>
            <span>Secure Booking</span>
        </div>
        <div class="feature-item">
            <i class="fas fa-clock"></i>
            <span>Instant Confirmation</span>
        </div>
        <div class="feature-item">
            <i class="fas fa-phone"></i>
            <span>24/7 Support</span>
        </div>
    </div>
</div>

<!-- Quick Booking Widget Styles -->
<style>
.quick-booking-widget {
    background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    max-width: 500px;
    margin: 0 auto;
}

.widget-header {
    text-align: center;
    margin-bottom: 25px;
}

.widget-header h3 {
    color: #111827;
    margin: 0 0 8px 0;
    font-size: 24px;
    font-weight: 700;
}

.widget-header p {
    color: #6b7280;
    margin: 0;
    font-size: 14px;
}

.quick-booking-form {
    margin-bottom: 25px;
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 15px;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-group label {
    font-size: 12px;
    font-weight: 600;
    color: #374151;
    margin-bottom: 5px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.form-group select,
.form-group input {
    padding: 12px;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 14px;
    transition: all 0.3s ease;
    background: white;
}

.form-group select:focus,
.form-group input:focus {
    outline: none;
    border-color: #dc2626;
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.widget-actions {
    display: flex;
    gap: 12px;
    margin-bottom: 25px;
}

.widget-actions .btn {
    flex: 1;
    padding: 14px 20px;
    font-weight: 600;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.widget-features {
    display: flex;
    justify-content: space-around;
    padding-top: 20px;
    border-top: 1px solid #e5e7eb;
}

.feature-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: #6b7280;
}

.feature-item i {
    font-size: 18px;
    color: #dc2626;
}

/* Responsive Design */
@media (max-width: 768px) {
    .quick-booking-widget {
        padding: 20px;
        margin: 0 15px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 12px;
    }
    
    .widget-actions {
        flex-direction: column;
    }
    
    .widget-features {
        flex-direction: column;
        gap: 15px;
    }
    
    .feature-item {
        flex-direction: row;
        justify-content: center;
    }
}

/* Dark theme variant */
.quick-booking-widget.dark {
    background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
    border-color: rgba(255, 255, 255, 0.1);
}

.quick-booking-widget.dark .widget-header h3 {
    color: #f9fafb;
}

.quick-booking-widget.dark .widget-header p {
    color: #d1d5db;
}

.quick-booking-widget.dark .form-group label {
    color: #d1d5db;
}

.quick-booking-widget.dark .form-group select,
.quick-booking-widget.dark .form-group input {
    background: #374151;
    border-color: #4b5563;
    color: #f9fafb;
}

.quick-booking-widget.dark .feature-item {
    color: #d1d5db;
}

/* Floating variant */
.quick-booking-widget.floating {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    max-width: 320px;
    transform: translateY(100%);
    transition: transform 0.3s ease;
}

.quick-booking-widget.floating.show {
    transform: translateY(0);
}

.quick-booking-widget.floating .widget-header {
    position: relative;
}

.quick-booking-widget.floating .close-widget {
    position: absolute;
    top: -10px;
    right: -10px;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #dc2626;
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}
</style>

<!-- Quick Booking Widget JavaScript -->
<script>
class QuickBookingWidget {
    constructor() {
        this.widget = document.getElementById('quick-booking-widget');
        this.form = document.getElementById('quick-booking-form');
        this.init();
    }

    init() {
        this.bindEvents();
        this.initializeDateInput();
    }

    bindEvents() {
        if (this.form) {
            this.form.addEventListener('submit', (e) => {
                e.preventDefault();
                this.handleQuickBooking();
            });
        }

        // Service type change affects destination options
        const serviceSelect = document.getElementById('quick-service');
        if (serviceSelect) {
            serviceSelect.addEventListener('change', (e) => {
                this.updateDestinationOptions(e.target.value);
            });
        }
    }

    initializeDateInput() {
        const dateInput = document.getElementById('quick-date');
        if (dateInput) {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            dateInput.min = tomorrow.toISOString().split('T')[0];
            dateInput.value = tomorrow.toISOString().split('T')[0];
        }
    }

    updateDestinationOptions(serviceType) {
        const toSelect = document.getElementById('quick-to');
        if (!toSelect) return;

        let destinations = [];

        switch (serviceType) {
            case 'helicopter':
                destinations = [
                    { value: 'masai-mara', text: 'Masai Mara' },
                    { value: 'samburu', text: 'Samburu' },
                    { value: 'lamu', text: 'Lamu' },
                    { value: 'malindi', text: 'Malindi' },
                    { value: 'nakuru', text: 'Lake Nakuru' }
                ];
                break;
            case 'private-jet':
                destinations = [
                    { value: 'zanzibar', text: 'Zanzibar' },
                    { value: 'serengeti', text: 'Serengeti' },
                    { value: 'kigali', text: 'Kigali' },
                    { value: 'kampala', text: 'Kampala' },
                    { value: 'dar-es-salaam', text: 'Dar es Salaam' }
                ];
                break;
            case 'scenic':
                destinations = [
                    { value: 'rift-valley', text: 'Rift Valley' },
                    { value: 'mount-kenya', text: 'Mount Kenya' },
                    { value: 'nairobi-city', text: 'Nairobi City Tour' },
                    { value: 'coast-scenic', text: 'Coast Scenic' }
                ];
                break;
            default:
                destinations = [
                    { value: 'masai-mara', text: 'Masai Mara' },
                    { value: 'samburu', text: 'Samburu' },
                    { value: 'zanzibar', text: 'Zanzibar' }
                ];
        }

        // Clear existing options except the first one
        toSelect.innerHTML = '<option value="">Destination</option>';
        
        // Add new options
        destinations.forEach(dest => {
            const option = document.createElement('option');
            option.value = dest.value;
            option.textContent = dest.text;
            toSelect.appendChild(option);
        });
    }

    handleQuickBooking() {
        const formData = new FormData(this.form);
        const bookingData = {};
        
        for (let [key, value] of formData.entries()) {
            bookingData[key] = value;
        }

        if (!this.validateForm(bookingData)) {
            return;
        }

        // Show loading state
        this.showLoading();

        // Simulate availability check
        setTimeout(() => {
            this.hideLoading();
            this.redirectToBooking(bookingData);
        }, 1500);
    }

    validateForm(data) {
        const requiredFields = ['service', 'passengers', 'from', 'to', 'date', 'time'];
        
        for (let field of requiredFields) {
            if (!data[field]) {
                this.showError(`Please select ${field.replace('-', ' ')}`);
                return false;
            }
        }

        // Check if departure and destination are different
        if (data.from === data.to) {
            this.showError('Departure and destination cannot be the same');
            return false;
        }

        return true;
    }

    redirectToBooking(data) {
        // Build URL with query parameters
        const params = new URLSearchParams(data);
        const bookingUrl = `pages/booking.html?${params.toString()}`;
        window.location.href = bookingUrl;
    }

    showLoading() {
        const submitBtn = this.form.querySelector('button[type="submit"]');
        if (submitBtn) {
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Checking...';
            submitBtn.disabled = true;
        }
    }

    hideLoading() {
        const submitBtn = this.form.querySelector('button[type="submit"]');
        if (submitBtn) {
            submitBtn.innerHTML = '<i class="fas fa-search"></i> Check Availability';
            submitBtn.disabled = false;
        }
    }

    showError(message) {
        // Create a simple toast notification
        const toast = document.createElement('div');
        toast.className = 'quick-booking-toast error';
        toast.innerHTML = `
            <i class="fas fa-exclamation-circle"></i>
            <span>${message}</span>
        `;
        
        document.body.appendChild(toast);
        
        setTimeout(() => {
            toast.classList.add('show');
        }, 100);
        
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => {
                toast.remove();
            }, 300);
        }, 3000);
    }

    // Public methods for external control
    show() {
        if (this.widget) {
            this.widget.classList.add('show');
        }
    }

    hide() {
        if (this.widget) {
            this.widget.classList.remove('show');
        }
    }

    toggle() {
        if (this.widget) {
            this.widget.classList.toggle('show');
        }
    }
}

// Toast styles
const toastStyles = `
    .quick-booking-toast {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #ef4444;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 9999;
        transform: translateX(100%);
        opacity: 0;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }
    
    .quick-booking-toast.show {
        transform: translateX(0);
        opacity: 1;
    }
    
    .quick-booking-toast.error {
        background: #ef4444;
    }
    
    .quick-booking-toast.success {
        background: #10b981;
    }
    
    @media (max-width: 768px) {
        .quick-booking-toast {
            top: 10px;
            right: 10px;
            left: 10px;
            transform: translateY(-100%);
        }
        
        .quick-booking-toast.show {
            transform: translateY(0);
        }
    }
`;

// Inject toast styles
if (!document.getElementById('quick-booking-toast-styles')) {
    const styleSheet = document.createElement('style');
    styleSheet.id = 'quick-booking-toast-styles';
    styleSheet.textContent = toastStyles;
    document.head.appendChild(styleSheet);
}

// Initialize widget when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    if (document.getElementById('quick-booking-widget')) {
        window.quickBookingWidget = new QuickBookingWidget();
    }
});
</script>